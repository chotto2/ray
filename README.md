<!-- markdownlint-disable MD041 -->
[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/chotto2/ray)

# Ray - 光を放射するように約数を特定するプログラム

## 概要

整数０から128までの値の持つ約数を新アルゴリズム（光放射法）を使って調べて＊で表示する。  
これは、先に公開した [dstar-dev](https://github.com/chotto2/dstar-dev) を起源とする派生プログラムである。  
当プログラム（以降、ray と呼ぶ）のプロットする＊の模様は、エラトステネスの篩を使って生成した模様と一致する。  
エラトステネスの篩を使用せずに、dstar-dev のREADMEで述べた「VOID域に約数はない」という性質を利用している。  
そうした意味では、エラトステネスの篩を代替するアルゴリズムとも言える。  
アルゴリズム自体は単純で、原点０から傾きが 1/n(n=1,2,3,...) の光の筋が一斉に放射されることをイメージする。  
放射された光の筋の１本１本の上にのみ約数が存在しうるとして次々と特定していく。  
アルゴリズムとしては単純ではあるが、メモリー消費量が小さく巨大整数にも対応できるという特徴がある。  
結果としてのリストは、results/resultr.txt に置いたので、是非とも眺めていって欲しい。  
但し、dstar-dev と見栄えは変わらない。

## 特徴

- 🐳 **Docker対応** - 再現可能なビルド環境
- 📊 **128までの約数** - 教育・研究目的に適したサイズ

## 必要環境

- Docker Desktop
- Git

## ビルドと実行

```bash
# リポジトリのクローン
git clone https://github.com/chotto2/ray.git
cd ray

# Dockerイメージのビルド
docker build -t ray .

# 実行（リスト出力）
docker run -it ray /app/build/ray
```

## パフォーマンス

```text
real    0m0.250s
user    0m0.009s
sys     0m0.015s
```

※Codespace:2-Core  
※出力のリダイレクトなし

## 出力例

`ray`の出力結果を示す。

```text
      n:   d(n):divisor2(n, 128)
      0:    128:******************************** ...
      1:      1:*
      2:      2:**
      3:      2:* *
      4:      3:** *
      5:      2:*   *
      6:      4:***  *
      7:      2:*     *
      8:      4:** *   *
      9:      3:* *     *
     10:      4:**  *    *
     11:      2:*         *
     12:      6:**** *     *
     13:      2:*           *
     14:      4:**    *      *
     15:      4:* * *         *
...
```

最初の行は、１行のリストが ':' で区切られた３つのフィールドで構成されていることを示す。
第1フィールドの n は、対象とする整数値を示す。  
第2フィールドの d(n) は、整数 n の約数の数を示す。  
第3フィールドの divisor2(n, 128) は、約数の位置に＊をプロットすることを示す。  
約数（＊）の位置は、第2フィールドに近いほうから、123... という昇順となっている。  
divisor2(n, 128) は、約数の上限を 128 までに限定して約数を求める。その結果を＊で表示するようにしている。  

例えば、整数 6 の場合はどういう出力になるか見ると、下記のようになっている。

```text
      6:      4:***  * 
```

これは整数 6 は、約数が 4 個で、約数は{1,2,3,6}であることを示す。（4 と 5 の位置は空白）

※整数0は特殊なケースで、0でないすべての整数が約数となる（n × 0 = 0）

## 主な処理シーケンス

処理１）n=0 の約数をプロット

```text
      n:   d(n):divisor2(n, 128)
      0:    128:********************************...
      1:      0:
      2:      0:
      3:      0:
      4:      0:
      5:      0:
      6:      0:
...
```

処理２） divisor2()=1/nの位置をプロット

```text
      n:   d(n):divisor2(n, 128)
      0:    128:********************************...
      1:      1:*
      2:      1:*
      3:      1:*
      4:      1:*
      5:      1:*
      6:      1:*
...
```

処理３） divisor2()=2/nの位置をプロット

```text
      n:   d(n):divisor2(n, 128)
      0:    128:********************************...
      1:      1:*
      2:      2:**
      3:      1:*
      4:      2:**
      5:      1:*
      6:      2:**
...
```

処理４） divisor2()=3/nの位置をプロット

```text
      n:   d(n):divisor2(n, 128)
      0:    128:********************************...
      1:      1:*
      2:      2:**
      3:      2:* *
      4:      2:**
      5:      1:*
      6:      3:***
...
```

処理５） divisor2()=4/nの位置をプロット

```text
      n:   d(n):divisor2(n, 128)
      0:    128:********************************...
      1:      1:*
      2:      2:**
      3:      2:* *
      4:      3:** *
      5:      1:*
      6:      3:***
...
```

処理６） divisor2()=5/nの位置をプロット

```text
      n:   d(n):divisor2(n, 128)
      0:    128:********************************...
      1:      1:*
      2:      2:**
      3:      2:* *
      4:      3:** *
      5:      2:*   *
      6:      3:***
...
```

処理７） divisor2()=6/nの位置をプロット

```text
      n:   d(n):divisor2(n, 128)
      0:    128:********************************...
      1:      1:*
      2:      2:**
      3:      2:* *
      4:      3:** *
      5:      2:*   *
      6:      4:***  *
...
```

処理８）上記の内容を繰り返すと全整数の約数を求めることができる。

> **注：**　VOID域を排除した新しいアルゴリズムなので、結果を保証するものではありません。
> 自己責任でお願いします。

## 技術詳細

- **言語**: C
- **ライブラリ**: GMP (GNU Multiple Precision Arithmetic Library)
- **ビルドシステム**: CMake
- **約数の範囲**: 0..128

## 注意事項

⚠️ **重要**: このバージョンは教育・研究目的の実装です。整数 128 までの約数を扱うため、現代の暗号システム（RSA-4096など）には影響しません。

## 今後の予定

- 📝 arXivへの論文投稿予定
- 📚 アルゴリズムの詳細な理論的背景

## ライセンス

MIT License

## 著者

N.Arai

## 引用

論文準備中。公開後、適切な引用方法を記載します。

## 関連リンク

- 論文: arXiv (準備中)
- リポジトリ: <https://github.com/chotto2/ray>
